## js执行上下文和执行栈
  执行上下文是当前 JavaScript 代码被解析和执行时所在环境的抽象概念。  
  执行栈用于存储在代码执行期间创建的执行上下文。也叫调用栈，有LIFO先进后出的结构。
  
#### 执行上下文类型
* 全局执行上下文: 默认的、最基础的执行上下文。一个程序中有且仅有一个全局执行上下文。
* 函数执行上下文: 每次函数被调用时，就会创建一个新的局部执行上下文。可以存在多个。
* eval函数: 运行在eval函数中的执行上下文

#### 执行上下文包括三个重要属性
* 变量对象(Variable Object / VO): 与执行上下文相关的数据作用域，存储了在上下文中定义的变量和函数声明。  
      包括: 函数的所有形参、函数声明和变量声明
* 作用域链(Scope Chain)
* this

#### 执行上下文的周期
* 创建阶段: 创建变量对象、建立作用域链和确定this指向。<b>变量对象不能被访问。</b>
* 执行阶段: 变量赋值和函数引用以及其他代码。<b>变量对象转变为活动对象，里面的对象都可以被访问。</b>

看下面代码
```
console.log(foo); //打印的是函数  

function foo(){
    console.log("foo");
}

var foo = 1;
console.log(foo); // 打印 '1'
```
<b>在同一个函数执行上下文，声明的函数和变量(在创建阶段声明, 变量还未赋值)，且函数优先级比变量高(有相同名称的函数和变量，函数优先级高)，然后执行阶段，第一行代码打印的是函数，
随后foo赋值为1，打印出来1。</b>

## js作用域链
当查找变量的时候，会先从当前上下文的变量对象中查找，如果没有找到就会父级执行上下文的变量对象中查找，一直找到全局执行上下文的变量对象，这样由多个执行上下文的变量对象构成的链表叫做作用域链


